<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>ZIM - Code Creativity</title>

<script src="https://unpkg.com/@rive-app/canvas@2.20.0"></script>
<!-- zimjs.com - JavaScript Canvas Framework -->
<script type="module">

import zim from "https://zimjs.org/cdn/017/zim";

// See Docs under Frame for FIT, FILL, FULL, and TAG
new Frame(FIT, 1024, 1024, green, green, ready);
function ready() {

// Given F, S, W, H or frame, stage, stageW, stageH


// or could add a canvas tag to the body with width and height
const riveCanvas = document.createElement("canvas");
riveCanvas.setAttribute("width", 500);
riveCanvas.setAttribute("height", 500);
document.body.appendChild(riveCanvas);

// hide the canvas tag
riveCanvas.style.visibility = "hidden";

// from Rive
const r = new rive.Rive({
	src: "bouncing_ball.riv",
	canvas: riveCanvas,
	autoplay: true,
    onLoad: () => {
        const artboard = r.artboard;
        console.log(artboard);
    }
});

// could just make the Bitmap 
new Bitmap(riveCanvas).sca(0.5).center().drag(); // for instance

const fragment = `    

#define time iTime

#define time iTime

void mainImage(out vec4 fragColor, in vec2 fragCoord) {
    vec2 uv = fragCoord.xy / iResolution.xy;  // Normalized coordinates (0 to 1)
    
    // Move UV coordinates to range [-1, 1] for easier manipulation
    uv = uv * 2.0 - 1.0;
    
    // Define wave parameters
    float frequency = 4.0;  // Number of waves
    float amplitude = 0.2;  // Height of the wave
    float speed = 1.5;      // Speed of the wave movement

    // Calculate the y position of the wave based on a sine function
    float wave = sin(uv.x * frequency + time * speed) * amplitude;
    
    // Draw the wave as a line (only color pixels close to the wave's y position)
    float thickness = 0.02;  // Thickness of the wave line
    float distToWave = abs(uv.y - wave);  // Distance from current fragment to wave

    // Define color for the wave (blue-like water color)
    vec3 waveColor = vec3(0.2, 0.4, 1.0);

    // If the fragment is close to the wave line, color it; otherwise, background color (black)
    vec3 finalColor = mix(vec3(0.0), waveColor, smoothstep(thickness, 0.0, distToWave));
    
    // Set the fragment color
    fragColor = vec4(finalColor, 1.0);
}


    `;   

	new Shader(500, 500, fragment).alp(0.3).center();
    
    Ticker.always(); 

} // end ready

</script>
<meta name="viewport" content="width=device-width, user-scalable=no" />
</head>
<body></body>
</html>